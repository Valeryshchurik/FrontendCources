{"ast":null,"code":"var _jsxFileName = \"/home/valery/Work/fe/FrontendCources/Task5/reacttask/src/components/timer/TimerOnRef.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useEffect, useState, useRef } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst TimerOnRef = _ref => {\n  _s();\n\n  let {\n    children,\n    settings,\n    onComplete\n  } = _ref;\n  const time = useRef([0, 0, 5]);\n  const [time_for_render, setTimeForRender] = useState(time.current);\n  const [want_to_start, setWantToStart] = useState(true);\n  const intervalId = useRef();\n  useEffect(() => {\n    if (want_to_start) {\n      setWantToStart(false);\n      startTimer();\n    }\n  }, [want_to_start]);\n\n  function startTimer() {\n    intervalId.current = setInterval(() => {\n      let hours = time.current[0];\n      let minutes = time.current[1];\n      let seconds = time.current[2];\n      let h = hours;\n      let m = minutes;\n      let s = seconds - 1;\n\n      if (s === -1) {\n        let m = minutes - 1;\n        s = 59;\n\n        if (m === -1) {\n          let h = hours - 1;\n          m = 59; // Why do webstorm is lying to me?\n\n          if (h === -1) {\n            s = 0;\n            m = 0; // Why do webstorm is lying to me?\n\n            h = 0; // Why do webstorm is lying to me?\n\n            clearInterval(intervalId.current);\n          }\n        }\n      }\n\n      console.log(seconds);\n      time.current = [h, m, s];\n      setTimeForRender(time.current);\n    }, 1000);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [children(time_for_render[0], time_for_render[1], time_for_render[2]), \"\\xA0\\u0422\\u0430\\u0439\\u043C\\u0435\\u0440 \\u0447\\u0435\\u0440\\u0435\\u0437 \\u0440\\u0435\\u0444\\xA0\", /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        clearInterval(intervalId.current);\n        setWantToStart(true);\n        time.current = [0, 0, 5];\n        setTimeForRender(time.current);\n      },\n      children: \"\\u0420\\u0435\\u0441\\u0442\\u0430\\u0440\\u0442\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 9\n  }, this);\n};\n\n_s(TimerOnRef, \"1WB/vRn2ne4aLh2RiUZFtZ+V/So=\");\n\n_c = TimerOnRef;\nexport default TimerOnRef;\n\nvar _c;\n\n$RefreshReg$(_c, \"TimerOnRef\");","map":{"version":3,"names":["React","useEffect","useState","useRef","TimerOnRef","children","settings","onComplete","time","time_for_render","setTimeForRender","current","want_to_start","setWantToStart","intervalId","startTimer","setInterval","hours","minutes","seconds","h","m","s","clearInterval","console","log"],"sources":["/home/valery/Work/fe/FrontendCources/Task5/reacttask/src/components/timer/TimerOnRef.jsx"],"sourcesContent":["import React from 'react';\nimport {useEffect, useState, useRef} from \"react\";\n\nconst TimerOnRef = ({children, settings, onComplete}) => {\n    const time = useRef([0, 0, 5])\n    const [time_for_render, setTimeForRender] = useState(time.current)\n\n    const [want_to_start, setWantToStart] = useState(true);\n    const intervalId = useRef();\n    useEffect(() => {\n        if (want_to_start) {\n            setWantToStart(false)\n            startTimer();\n        }\n    }, [want_to_start]);\n\n    function startTimer() {\n        intervalId.current = setInterval(() => {\n            let hours = time.current[0];\n            let minutes = time.current[1];\n            let seconds = time.current[2];\n\n            let h = hours;\n            let m = minutes;\n            let s = seconds - 1;\n\n\n            if (s === -1) {\n                let m = minutes - 1;\n                s = 59;\n                if (m === -1){\n                    let h = hours -1;\n                    m = 59;  // Why do webstorm is lying to me?\n                    if (h === -1){\n                        s=0;\n                        m=0;  // Why do webstorm is lying to me?\n                        h=0;  // Why do webstorm is lying to me?\n                        clearInterval(intervalId.current)\n                    }\n                }\n            }\n            console.log(seconds);\n            time.current = [h, m, s];\n            setTimeForRender(time.current)\n        }, 1000);\n    }\n    return (\n        <div>\n            {children(time_for_render[0], time_for_render[1], time_for_render[2])}\n            &nbsp;Таймер через реф&nbsp;\n            <button onClick={() => {\n                clearInterval(intervalId.current); setWantToStart(true);\n                time.current = [0,0,5];\n                setTimeForRender(time.current);\n            }}>\n                Рестарт\n            </button>\n        </div>\n    );\n};\n\nexport default TimerOnRef;"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,SAAR,EAAmBC,QAAnB,EAA6BC,MAA7B,QAA0C,OAA1C;;;AAEA,MAAMC,UAAU,GAAG,QAAsC;EAAA;;EAAA,IAArC;IAACC,QAAD;IAAWC,QAAX;IAAqBC;EAArB,CAAqC;EACrD,MAAMC,IAAI,GAAGL,MAAM,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAD,CAAnB;EACA,MAAM,CAACM,eAAD,EAAkBC,gBAAlB,IAAsCR,QAAQ,CAACM,IAAI,CAACG,OAAN,CAApD;EAEA,MAAM,CAACC,aAAD,EAAgBC,cAAhB,IAAkCX,QAAQ,CAAC,IAAD,CAAhD;EACA,MAAMY,UAAU,GAAGX,MAAM,EAAzB;EACAF,SAAS,CAAC,MAAM;IACZ,IAAIW,aAAJ,EAAmB;MACfC,cAAc,CAAC,KAAD,CAAd;MACAE,UAAU;IACb;EACJ,CALQ,EAKN,CAACH,aAAD,CALM,CAAT;;EAOA,SAASG,UAAT,GAAsB;IAClBD,UAAU,CAACH,OAAX,GAAqBK,WAAW,CAAC,MAAM;MACnC,IAAIC,KAAK,GAAGT,IAAI,CAACG,OAAL,CAAa,CAAb,CAAZ;MACA,IAAIO,OAAO,GAAGV,IAAI,CAACG,OAAL,CAAa,CAAb,CAAd;MACA,IAAIQ,OAAO,GAAGX,IAAI,CAACG,OAAL,CAAa,CAAb,CAAd;MAEA,IAAIS,CAAC,GAAGH,KAAR;MACA,IAAII,CAAC,GAAGH,OAAR;MACA,IAAII,CAAC,GAAGH,OAAO,GAAG,CAAlB;;MAGA,IAAIG,CAAC,KAAK,CAAC,CAAX,EAAc;QACV,IAAID,CAAC,GAAGH,OAAO,GAAG,CAAlB;QACAI,CAAC,GAAG,EAAJ;;QACA,IAAID,CAAC,KAAK,CAAC,CAAX,EAAa;UACT,IAAID,CAAC,GAAGH,KAAK,GAAE,CAAf;UACAI,CAAC,GAAG,EAAJ,CAFS,CAEA;;UACT,IAAID,CAAC,KAAK,CAAC,CAAX,EAAa;YACTE,CAAC,GAAC,CAAF;YACAD,CAAC,GAAC,CAAF,CAFS,CAEH;;YACND,CAAC,GAAC,CAAF,CAHS,CAGH;;YACNG,aAAa,CAACT,UAAU,CAACH,OAAZ,CAAb;UACH;QACJ;MACJ;;MACDa,OAAO,CAACC,GAAR,CAAYN,OAAZ;MACAX,IAAI,CAACG,OAAL,GAAe,CAACS,CAAD,EAAIC,CAAJ,EAAOC,CAAP,CAAf;MACAZ,gBAAgB,CAACF,IAAI,CAACG,OAAN,CAAhB;IACH,CA3B+B,EA2B7B,IA3B6B,CAAhC;EA4BH;;EACD,oBACI;IAAA,WACKN,QAAQ,CAACI,eAAe,CAAC,CAAD,CAAhB,EAAqBA,eAAe,CAAC,CAAD,CAApC,EAAyCA,eAAe,CAAC,CAAD,CAAxD,CADb,iHAGI;MAAQ,OAAO,EAAE,MAAM;QACnBc,aAAa,CAACT,UAAU,CAACH,OAAZ,CAAb;QAAmCE,cAAc,CAAC,IAAD,CAAd;QACnCL,IAAI,CAACG,OAAL,GAAe,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,CAAf;QACAD,gBAAgB,CAACF,IAAI,CAACG,OAAN,CAAhB;MACH,CAJD;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAHJ;EAAA;IAAA;IAAA;IAAA;EAAA,QADJ;AAaH,CAxDD;;GAAMP,U;;KAAAA,U;AA0DN,eAAeA,UAAf"},"metadata":{},"sourceType":"module"}